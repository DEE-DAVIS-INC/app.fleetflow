"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[357],{11550:(e,t,s)=>{s.d(t,{A:()=>n,AuthProvider:()=>c,O:()=>l});var r=s(95155),a=s(12115);let i=(0,a.createContext)(void 0),n=()=>{let e=(0,a.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},c=e=>{let{children:t}=e,[s,n]=(0,a.useState)({id:"U001",name:"Fleet Manager",email:"manager@fleetflow.com",role:"Admin",permissions:["all"]});return(0,r.jsx)(i.Provider,{value:{user:s,hasPermission:e=>!!s&&(!!s.permissions.includes("all")||s.permissions.includes(e)),login:e=>{n(e),localStorage.setItem("fleetflow-user",JSON.stringify(e))},logout:()=>{n(null),localStorage.removeItem("fleetflow-user")}},children:t})},l=e=>{let{children:t,requiredPermission:s,fallback:a}=e,{hasPermission:i}=n();return s&&!i(s)?a||(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[(0,r.jsx)("svg",{className:"w-12 h-12 text-red-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 15.5c-.77.833.192 2.5 1.732 2.5z"})}),(0,r.jsx)("h3",{className:"text-lg font-medium text-red-800 mb-2",children:"Access Denied"}),(0,r.jsx)("p",{className:"text-red-600",children:"You don't have permission to access this feature."}),(0,r.jsxs)("p",{className:"text-sm text-red-500 mt-2",children:["Required permission: ",(0,r.jsx)("code",{className:"bg-red-100 px-2 py-1 rounded",children:s})]})]}):(0,r.jsx)(r.Fragment,{children:t})}},15570:(e,t,s)=>{s.d(t,{A:()=>n});var r=s(95155),a=s(12115),i=s(11550);function n(e){let{section:t,entityId:s,entityName:n}=e,{user:c}=(0,i.A)(),[l,o]=(0,a.useState)([]),[d,m]=(0,a.useState)(""),[x,u]=(0,a.useState)(!1),[h,p]=(0,a.useState)("medium"),[g,y]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let e=localStorage.getItem("fleetflow-notes-".concat(t,"-").concat(s));e&&o(JSON.parse(e))},[t,s]);let N=e=>{o(e),localStorage.setItem("fleetflow-notes-".concat(t,"-").concat(s),JSON.stringify(e))},j=e=>{N(l.filter(t=>t.id!==e))},b=e=>{switch(e){case"high":return"bg-red-100 border-red-300 text-red-800";case"medium":return"bg-yellow-100 border-yellow-300 text-yellow-800";case"low":return"bg-green-100 border-green-300 text-green-800";default:return"bg-gray-100 border-gray-300 text-gray-800"}},f=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return(0,r.jsxs)("div",{className:"sticky-note-container",children:[(0,r.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,r.jsxs)("button",{onClick:()=>u(!x),className:"flex items-center gap-2 text-sm font-medium text-gray-700 hover:text-gray-900",children:[(0,r.jsx)("span",{className:"text-yellow-500",children:"\uD83D\uDCDD"}),"Notes ",n&&"- ".concat(n),l.length>0&&(0,r.jsx)("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",children:l.length}),(0,r.jsx)("svg",{className:"w-4 h-4 transition-transform ".concat(x?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),x&&(0,r.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 space-y-3",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("textarea",{value:d,onChange:e=>m(e.target.value),placeholder:"Add a note about this item...",className:"w-full p-2 border border-gray-300 rounded text-sm resize-none",rows:2}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("select",{value:h,onChange:e=>p(e.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1",children:[(0,r.jsx)("option",{value:"low",children:"Low Priority"}),(0,r.jsx)("option",{value:"medium",children:"Medium Priority"}),(0,r.jsx)("option",{value:"high",children:"High Priority"})]}),(0,r.jsxs)("label",{className:"flex items-center gap-1 text-xs text-gray-600",children:[(0,r.jsx)("input",{type:"checkbox",checked:g,onChange:e=>y(e.target.checked),className:"text-xs"}),"Share with team"]})]}),(0,r.jsx)("button",{onClick:()=>{d.trim()&&c&&(N([{id:Date.now().toString(),content:d.trim(),section:t,entityId:s,createdBy:c.name,createdAt:new Date().toISOString(),isShared:g,priority:h},...l]),m(""))},disabled:!d.trim(),className:"bg-blue-500 text-white px-3 py-1 rounded text-xs hover:bg-blue-600 disabled:bg-gray-300",children:"Add Note"})]})]}),(0,r.jsx)("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:0===l.length?(0,r.jsx)("p",{className:"text-gray-500 text-sm italic",children:"No notes yet. Add one above!"}):l.map(e=>(0,r.jsx)("div",{className:"p-3 rounded border-l-4 ".concat(b(e.priority)),children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-sm text-gray-800 mb-1",children:e.content}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[(0,r.jsx)("span",{children:e.createdBy}),(0,r.jsx)("span",{children:"•"}),(0,r.jsx)("span",{children:f(e.createdAt)}),(0,r.jsx)("span",{children:"•"}),(0,r.jsx)("span",{className:"capitalize",children:e.priority}),e.isShared&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:"•"}),(0,r.jsx)("span",{className:"text-blue-600",children:"\uD83D\uDC65 Shared"})]})]})]}),(0,r.jsx)("button",{onClick:()=>j(e.id),className:"text-red-500 hover:text-red-700 ml-2",title:"Delete note",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},e.id))})]})]})}},51428:(e,t,s)=>{s.d(t,{A:()=>n});var r=s(95155),a=s(12115);class i{static async lookupByDOTNumber(e){try{if(!e||""===e.trim())return{success:!1,error:"DOT number is required"};let t=e.replace(/\D/g,"");if(0===t.length)return{success:!1,error:"Invalid DOT number format"};let s="".concat(this.BASE_URL,"/id/").concat(t,"?webKey=").concat(this.API_KEY),r=await fetch(s,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(!r.ok){if(404===r.status)return{success:!1,error:"Carrier not found with the provided DOT number"};throw Error("HTTP error! status: ".concat(r.status))}let a=await r.json();if(a.content&&a.content.includes("no resource"))return{success:!1,error:"Carrier not found with the provided DOT number"};let i=this.parseCarrierData(a);return{success:!0,data:i}}catch(e){return console.error("FMCSA API Error:",e),{success:!1,error:e instanceof Error?e.message:"Failed to fetch carrier information"}}}static async searchByName(e){try{if(!e||""===e.trim())return{success:!1,error:"Carrier name is required"};let t=encodeURIComponent(e.trim()),s="".concat(this.BASE_URL,"/name/").concat(t,"?webKey=").concat(this.API_KEY),r=await fetch(s,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(!r.ok){if(404===r.status)return{success:!1,error:"No carriers found with the provided name"};throw Error("HTTP error! status: ".concat(r.status))}let a=await r.json();if(a.content&&a.content.includes("no resource"))return{success:!1,error:"No carriers found with the provided name"};let i=Array.isArray(a)?this.parseCarrierData(a[0]):this.parseCarrierData(a);return{success:!0,data:i}}catch(e){return console.error("FMCSA API Error:",e),{success:!1,error:e instanceof Error?e.message:"Failed to search carrier information"}}}static parseCarrierData(e){var t,s,r,a;return{dotNumber:e.dotNumber||e.usdotNumber||"",legalName:e.legalName||e.name||"",dbaName:e.dbaName||e.dba||"",carrierOperation:e.carrierOperation||"",hm:e.hm||"N",pc:e.pc||"N",address:{street:e.phyStreet||(null==(t=e.address)?void 0:t.street)||"",city:e.phyCity||(null==(s=e.address)?void 0:s.city)||"",state:e.phyState||(null==(r=e.address)?void 0:r.state)||"",zip:e.phyZipcode||(null==(a=e.address)?void 0:a.zip)||""},phone:e.telephone||e.phone||"",usdotNumber:e.usdotNumber||e.dotNumber||"",mcNumber:e.mcNumber||"",powerUnits:parseInt(e.powerUnits)||0,drivers:parseInt(e.drivers)||0,mcs150Date:e.mcs150Date||"",mcs150Mileage:parseInt(e.mcs150Mileage)||0,safetyRating:e.safetyRating||"",safetyRatingDate:e.safetyRatingDate||"",reviewDate:e.reviewDate||"",reviewType:e.reviewType||"",crashTotal:parseInt(e.crashTotal)||0,crashFatal:parseInt(e.crashFatal)||0,crashInjury:parseInt(e.crashInjury)||0,crashTow:parseInt(e.crashTow)||0,crashHazmat:parseInt(e.crashHazmat)||0,inspectionTotal:parseInt(e.inspectionTotal)||0,inspectionVehicleOos:parseInt(e.inspectionVehicleOos)||0,inspectionDriverOos:parseInt(e.inspectionDriverOos)||0,inspectionHazmat:parseInt(e.inspectionHazmat)||0,inspectionIep:parseInt(e.inspectionIep)||0}}static generateDemoData(e){return{dotNumber:e,legalName:"Demo Carrier ".concat(e),dbaName:"Demo Transport LLC",carrierOperation:"Interstate",hm:"N",pc:"N",address:{street:"123 Demo Street",city:"Demo City",state:"TX",zip:"75001"},phone:"(555) 123-4567",usdotNumber:e,mcNumber:"MC-123456",powerUnits:25,drivers:30,mcs150Date:"2024-01-15",mcs150Mileage:125e3,safetyRating:"Satisfactory",safetyRatingDate:"2023-06-15",reviewDate:"2023-06-15",reviewType:"Compliance Review",crashTotal:2,crashFatal:0,crashInjury:1,crashTow:1,crashHazmat:0,inspectionTotal:45,inspectionVehicleOos:3,inspectionDriverOos:2,inspectionHazmat:0,inspectionIep:0}}}function n(e){var t;let{onCarrierUpdate:s}=e,[n,c]=(0,a.useState)(""),[l,o]=(0,a.useState)(""),[d,m]=(0,a.useState)("dot"),[x,u]=(0,a.useState)(!1),[h,p]=(0,a.useState)(null),[g,y]=(0,a.useState)(""),N=async()=>{if("dot"===d&&!n.trim())return void y("Please enter a DOT number");if("name"===d&&!l.trim())return void y("Please enter a carrier name");u(!0),y(""),p(null);try{let e;if((e="dot"===d?await i.lookupByDOTNumber(n):await i.searchByName(l)).success&&e.data)p(e.data),null==s||s(e.data);else if(y(e.error||"Failed to fetch carrier information"),"dot"===d&&n){let e=i.generateDemoData(n);p(e),null==s||s(e),y("Using demo data - API may be unavailable")}}catch(e){if(console.error("Lookup error:",e),y("Failed to connect to FMCSA database"),"dot"===d&&n){let e=i.generateDemoData(n);p(e),null==s||s(e),y("Using demo data - API may be unavailable")}}finally{u(!1)}},j=e=>{"Enter"===e.key&&N()};return(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm",children:[(0,r.jsxs)("div",{className:"px-4 py-3 border-b border-gray-200",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"FMCSA SAFER Lookup"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Search for carrier safety information"})]}),(0,r.jsxs)("div",{className:"p-4 space-y-4",children:[(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"radio",value:"dot",checked:"dot"===d,onChange:e=>m(e.target.value),className:"mr-2"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"DOT Number"})]}),(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"radio",value:"name",checked:"name"===d,onChange:e=>m(e.target.value),className:"mr-2"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Carrier Name"})]})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:["dot"===d?(0,r.jsx)("input",{type:"text",value:n,onChange:e=>c(e.target.value),onKeyPress:j,placeholder:"Enter DOT number (e.g., 123456)",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):(0,r.jsx)("input",{type:"text",value:l,onChange:e=>o(e.target.value),onKeyPress:j,placeholder:"Enter carrier name",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,r.jsx)("button",{onClick:N,disabled:x,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:x?"Searching...":"Search"})]}),g&&(0,r.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:(0,r.jsx)("p",{className:"text-sm text-red-800",children:g})}),x&&(0,r.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,r.jsx)("span",{className:"ml-2 text-gray-600",children:"Searching FMCSA database..."})]}),h&&!x&&(0,r.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,r.jsxs)("div",{className:"border-b border-gray-200 pb-4",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold text-gray-900",children:h.legalName}),h.dbaName&&(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["DBA: ",h.dbaName]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["DOT #: ",h.dotNumber]}),h.mcNumber&&(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["MC #: ",h.mcNumber]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("h5",{className:"font-medium text-gray-900",children:"Safety Information"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Safety Rating"}),(0,r.jsx)("span",{className:"inline-block px-2 py-1 rounded text-xs font-medium ".concat((e=>{if(!e)return"bg-gray-100 text-gray-800";let t=e.toLowerCase();return t.includes("satisfactory")||t.includes("active")?"bg-green-100 text-green-800":t.includes("conditional")||t.includes("warning")?"bg-yellow-100 text-yellow-800":t.includes("unsatisfactory")||t.includes("out of service")?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"})(h.safetyRating)),children:h.safetyRating||"Not Rated"}),h.safetyRatingDate&&(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Date: ",h.safetyRatingDate]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Operation Type"}),(0,r.jsx)("p",{className:"text-sm text-gray-900",children:h.carrierOperation||"Not Available"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Power Units"}),(0,r.jsx)("p",{className:"text-sm text-gray-900",children:h.powerUnits})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Drivers"}),(0,r.jsx)("p",{className:"text-sm text-gray-900",children:h.drivers})]})]})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("h5",{className:"font-medium text-gray-900",children:"Contact Information"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Physical Address"}),(0,r.jsx)("p",{className:"text-sm text-gray-900",children:(t=h.address)&&[t.street,t.city,t.state,t.zip].filter(Boolean).join(", ")||"Not Available"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Phone"}),(0,r.jsx)("p",{className:"text-sm text-gray-900",children:h.phone||"Not Available"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Hazmat"}),(0,r.jsx)("p",{className:"text-sm text-gray-900",children:"Y"===h.hm?"Yes":"No"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Passenger"}),(0,r.jsx)("p",{className:"text-sm text-gray-900",children:"Y"===h.pc?"Yes":"No"})]})]})]})]}),(0,r.jsxs)("div",{className:"pt-4 border-t border-gray-200",children:[(0,r.jsx)("h5",{className:"font-medium text-gray-900 mb-3",children:"Safety Statistics"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-2xl font-bold text-red-600",children:h.crashTotal}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Total Crashes"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-2xl font-bold text-red-800",children:h.crashFatal}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Fatal Crashes"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:h.inspectionTotal}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Inspections"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-2xl font-bold text-yellow-600",children:h.inspectionVehicleOos}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Vehicle OOS"})]})]})]}),h.mcs150Date&&(0,r.jsxs)("div",{className:"pt-4 border-t border-gray-200",children:[(0,r.jsx)("h5",{className:"font-medium text-gray-900 mb-3",children:"MCS-150 Filing"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Last Filed"}),(0,r.jsx)("p",{className:"text-sm text-gray-900",children:h.mcs150Date})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Reported Mileage"}),(0,r.jsx)("p",{className:"text-sm text-gray-900",children:h.mcs150Mileage.toLocaleString()})]})]})]})]})]})]})}i.API_KEY="7de24c4a0eade12f34685829289e0446daf7880e",i.BASE_URL="https://mobile.fmcsa.dot.gov/qc"}}]);