(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[494],{11550:(e,s,t)=>{"use strict";t.d(s,{A:()=>l,AuthProvider:()=>n,O:()=>c});var a=t(95155),i=t(12115);let r=(0,i.createContext)(void 0),l=()=>{let e=(0,i.useContext)(r);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},n=e=>{let{children:s}=e,[t,l]=(0,i.useState)({id:"U001",name:"Fleet Manager",email:"manager@fleetflow.com",role:"Admin",permissions:["all"]});return(0,a.jsx)(r.Provider,{value:{user:t,hasPermission:e=>!!t&&(!!t.permissions.includes("all")||t.permissions.includes(e)),login:e=>{l(e),localStorage.setItem("fleetflow-user",JSON.stringify(e))},logout:()=>{l(null),localStorage.removeItem("fleetflow-user")}},children:s})},c=e=>{let{children:s,requiredPermission:t,fallback:i}=e,{hasPermission:r}=l();return t&&!r(t)?i||(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[(0,a.jsx)("svg",{className:"w-12 h-12 text-red-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 15.5c-.77.833.192 2.5 1.732 2.5z"})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-red-800 mb-2",children:"Access Denied"}),(0,a.jsx)("p",{className:"text-red-600",children:"You don't have permission to access this feature."}),(0,a.jsxs)("p",{className:"text-sm text-red-500 mt-2",children:["Required permission: ",(0,a.jsx)("code",{className:"bg-red-100 px-2 py-1 rounded",children:t})]})]}):(0,a.jsx)(a.Fragment,{children:s})}},15570:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});var a=t(95155),i=t(12115),r=t(11550);function l(e){let{section:s,entityId:t,entityName:l}=e,{user:n}=(0,r.A)(),[c,d]=(0,i.useState)([]),[o,h]=(0,i.useState)(""),[m,x]=(0,i.useState)(!1),[u,j]=(0,i.useState)("medium"),[p,g]=(0,i.useState)(!0);(0,i.useEffect)(()=>{let e=localStorage.getItem("fleetflow-notes-".concat(s,"-").concat(t));e&&d(JSON.parse(e))},[s,t]);let v=e=>{d(e),localStorage.setItem("fleetflow-notes-".concat(s,"-").concat(t),JSON.stringify(e))},y=e=>{v(c.filter(s=>s.id!==e))},N=e=>{switch(e){case"high":return"bg-red-100 border-red-300 text-red-800";case"medium":return"bg-yellow-100 border-yellow-300 text-yellow-800";case"low":return"bg-green-100 border-green-300 text-green-800";default:return"bg-gray-100 border-gray-300 text-gray-800"}},f=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return(0,a.jsxs)("div",{className:"sticky-note-container",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,a.jsxs)("button",{onClick:()=>x(!m),className:"flex items-center gap-2 text-sm font-medium text-gray-700 hover:text-gray-900",children:[(0,a.jsx)("span",{className:"text-yellow-500",children:"\uD83D\uDCDD"}),"Notes ",l&&"- ".concat(l),c.length>0&&(0,a.jsx)("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",children:c.length}),(0,a.jsx)("svg",{className:"w-4 h-4 transition-transform ".concat(m?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),m&&(0,a.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 space-y-3",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("textarea",{value:o,onChange:e=>h(e.target.value),placeholder:"Add a note about this item...",className:"w-full p-2 border border-gray-300 rounded text-sm resize-none",rows:2}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("select",{value:u,onChange:e=>j(e.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1",children:[(0,a.jsx)("option",{value:"low",children:"Low Priority"}),(0,a.jsx)("option",{value:"medium",children:"Medium Priority"}),(0,a.jsx)("option",{value:"high",children:"High Priority"})]}),(0,a.jsxs)("label",{className:"flex items-center gap-1 text-xs text-gray-600",children:[(0,a.jsx)("input",{type:"checkbox",checked:p,onChange:e=>g(e.target.checked),className:"text-xs"}),"Share with team"]})]}),(0,a.jsx)("button",{onClick:()=>{o.trim()&&n&&(v([{id:Date.now().toString(),content:o.trim(),section:s,entityId:t,createdBy:n.name,createdAt:new Date().toISOString(),isShared:p,priority:u},...c]),h(""))},disabled:!o.trim(),className:"bg-blue-500 text-white px-3 py-1 rounded text-xs hover:bg-blue-600 disabled:bg-gray-300",children:"Add Note"})]})]}),(0,a.jsx)("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:0===c.length?(0,a.jsx)("p",{className:"text-gray-500 text-sm italic",children:"No notes yet. Add one above!"}):c.map(e=>(0,a.jsx)("div",{className:"p-3 rounded border-l-4 ".concat(N(e.priority)),children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm text-gray-800 mb-1",children:e.content}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[(0,a.jsx)("span",{children:e.createdBy}),(0,a.jsx)("span",{children:"•"}),(0,a.jsx)("span",{children:f(e.createdAt)}),(0,a.jsx)("span",{children:"•"}),(0,a.jsx)("span",{className:"capitalize",children:e.priority}),e.isShared&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"•"}),(0,a.jsx)("span",{className:"text-blue-600",children:"\uD83D\uDC65 Shared"})]})]})]}),(0,a.jsx)("button",{onClick:()=>y(e.id),className:"text-red-500 hover:text-red-700 ml-2",title:"Delete note",children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},e.id))})]})]})}},63267:(e,s,t)=>{Promise.resolve().then(t.bind(t,96997))},96997:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>l});var a=t(95155),i=t(12115),r=t(15570);function l(){let[e]=(0,i.useState)([{id:"M001",vehicleId:"V001",vehicleName:"Truck-045",type:"scheduled",status:"pending",description:"Oil change and filter replacement",scheduledDate:"2024-06-25",cost:150,mileage:125e3,technician:"Mike Thompson",priority:"medium",estimatedDuration:"2h"},{id:"M002",vehicleId:"V002",vehicleName:"Van-012",type:"repair",status:"in_progress",description:"Brake system repair",scheduledDate:"2024-06-24",cost:450,mileage:89e3,technician:"Sarah Wilson",priority:"high",estimatedDuration:"4h",actualDuration:"2h 30m"},{id:"M003",vehicleId:"V003",vehicleName:"Truck-089",type:"inspection",status:"completed",description:"Annual safety inspection",scheduledDate:"2024-06-20",completedDate:"2024-06-20",cost:200,mileage:156e3,technician:"James Rodriguez",priority:"medium",estimatedDuration:"3h",actualDuration:"2h 45m"},{id:"M004",vehicleId:"V004",vehicleName:"Van-023",type:"emergency",status:"overdue",description:"Engine diagnostic and repair",scheduledDate:"2024-06-22",cost:800,mileage:67e3,technician:"Lisa Chen",priority:"critical",estimatedDuration:"6h"},{id:"M005",vehicleId:"V005",vehicleName:"Truck-156",type:"scheduled",status:"completed",description:"Tire rotation and alignment",scheduledDate:"2024-06-18",completedDate:"2024-06-18",cost:300,mileage:203e3,technician:"Mike Thompson",priority:"low",estimatedDuration:"2h 30m",actualDuration:"2h 15m"}]),[s,t]=(0,i.useState)(""),[l,n]=(0,i.useState)("all"),[c,d]=(0,i.useState)("all"),o=e.filter(e=>{let t=e.vehicleName.toLowerCase().includes(s.toLowerCase())||e.description.toLowerCase().includes(s.toLowerCase())||e.technician.toLowerCase().includes(s.toLowerCase()),a="all"===l||e.status===l,i="all"===c||e.type===c;return t&&a&&i}),h=e=>{switch(e){case"critical":return"#dc2626";case"high":return"#ef4444";case"medium":return"#f59e0b";case"low":return"#10b981";default:return"#6b7280"}},m=e=>{switch(e){case"scheduled":return"\uD83D\uDCC5";case"emergency":return"\uD83D\uDEA8";case"inspection":return"\uD83D\uDD0D";case"repair":return"\uD83D\uDD27";default:return"⚙️"}},x=e.reduce((e,s)=>e+s.cost,0),u=x/e.length;return(0,a.jsxs)("div",{className:"container py-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-gray-900 mb-2",style:{fontSize:"2rem",fontWeight:"bold"},children:"Maintenance Management"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Schedule, track, and manage vehicle maintenance"})]}),(0,a.jsx)("button",{className:"btn btn-primary",children:"+ Schedule Maintenance"})]}),(0,a.jsx)("div",{className:"card mb-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{className:"form-label",children:"Search"}),(0,a.jsx)("input",{type:"text",placeholder:"Search by vehicle, description, or technician...",className:"form-input",value:s,onChange:e=>t(e.target.value)})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{className:"form-label",children:"Status Filter"}),(0,a.jsxs)("select",{className:"form-input",value:l,onChange:e=>n(e.target.value),children:[(0,a.jsx)("option",{value:"all",children:"All Status"}),(0,a.jsx)("option",{value:"pending",children:"Pending"}),(0,a.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,a.jsx)("option",{value:"completed",children:"Completed"}),(0,a.jsx)("option",{value:"overdue",children:"Overdue"})]})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{className:"form-label",children:"Type Filter"}),(0,a.jsxs)("select",{className:"form-input",value:c,onChange:e=>d(e.target.value),children:[(0,a.jsx)("option",{value:"all",children:"All Types"}),(0,a.jsx)("option",{value:"scheduled",children:"Scheduled"}),(0,a.jsx)("option",{value:"emergency",children:"Emergency"}),(0,a.jsx)("option",{value:"inspection",children:"Inspection"}),(0,a.jsx)("option",{value:"repair",children:"Repair"})]})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{className:"form-label",children:"Quick Actions"}),(0,a.jsx)("button",{className:"btn btn-secondary",style:{width:"100%"},children:"Maintenance Report"})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-6 mb-6",children:[(0,a.jsxs)("div",{className:"metric-card",children:[(0,a.jsx)("div",{className:"metric-value",children:e.length}),(0,a.jsx)("div",{className:"metric-label",children:"Total Records"})]}),(0,a.jsxs)("div",{className:"metric-card",children:[(0,a.jsx)("div",{className:"metric-value",children:e.filter(e=>"pending"===e.status).length}),(0,a.jsx)("div",{className:"metric-label",children:"Pending"})]}),(0,a.jsxs)("div",{className:"metric-card",children:[(0,a.jsx)("div",{className:"metric-value",children:e.filter(e=>"overdue"===e.status).length}),(0,a.jsx)("div",{className:"metric-label",children:"Overdue"})]}),(0,a.jsxs)("div",{className:"metric-card",children:[(0,a.jsxs)("div",{className:"metric-value",children:["$",x.toLocaleString()]}),(0,a.jsx)("div",{className:"metric-label",children:"Total Costs"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h3",{className:"mb-4",style:{fontSize:"1.25rem",fontWeight:"600"},children:"Upcoming Maintenance"}),(0,a.jsx)("div",{className:"space-y-3",children:e.filter(e=>"pending"===e.status||"overdue"===e.status).sort((e,s)=>new Date(e.scheduledDate).getTime()-new Date(s.scheduledDate).getTime()).slice(0,4).map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50",style:{borderRadius:"6px"},children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{style:{fontSize:"1.5rem"},children:m(e.type)}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{style:{fontWeight:"600"},children:e.vehicleName}),(0,a.jsx)("div",{className:"text-gray-600",style:{fontSize:"0.875rem"},children:e.description})]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{style:{color:"overdue"===e.status?"#ef4444":"#6b7280",fontWeight:"600",fontSize:"0.875rem"},children:e.scheduledDate}),(0,a.jsx)("div",{className:"status",style:{backgroundColor:"overdue"===e.status?"#fef2f2":"#fef3c7",color:"overdue"===e.status?"#dc2626":"#d97706",fontSize:"0.75rem"},children:e.status.replace("_"," ")})]})]},e.id))})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h3",{className:"mb-4",style:{fontSize:"1.25rem",fontWeight:"600"},children:"Maintenance Statistics"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Average Cost per Service"}),(0,a.jsxs)("span",{className:"text-gray-900",style:{fontWeight:"600"},children:["$",u.toFixed(0)]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"On-Time Completion"}),(0,a.jsx)("span",{className:"text-gray-900",style:{fontWeight:"600"},children:"87%"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Emergency Repairs"}),(0,a.jsx)("span",{className:"text-gray-900",style:{fontWeight:"600"},children:e.filter(e=>"emergency"===e.type).length})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Monthly Maintenance Budget"}),(0,a.jsx)("span",{className:"text-gray-900",style:{fontWeight:"600"},children:"$12,500"})]})]})]})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("h3",{className:"mb-4",style:{fontSize:"1.25rem",fontWeight:"600"},children:["Maintenance Records (",o.length," records)"]}),(0,a.jsx)("div",{style:{overflowX:"auto"},children:(0,a.jsxs)("table",{className:"table",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Vehicle"}),(0,a.jsx)("th",{children:"Type"}),(0,a.jsx)("th",{children:"Status"}),(0,a.jsx)("th",{children:"Description"}),(0,a.jsx)("th",{children:"Scheduled Date"}),(0,a.jsx)("th",{children:"Technician"}),(0,a.jsx)("th",{children:"Cost"}),(0,a.jsx)("th",{children:"Duration"}),(0,a.jsx)("th",{children:"Priority"}),(0,a.jsx)("th",{children:"Actions"})]})}),(0,a.jsx)("tbody",{children:o.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{style:{fontWeight:"600"},children:e.vehicleName}),(0,a.jsxs)("div",{className:"text-gray-600",style:{fontSize:"0.875rem"},children:[e.mileage.toLocaleString()," km"]})]})}),(0,a.jsx)("td",{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{children:m(e.type)}),(0,a.jsx)("span",{style:{textTransform:"capitalize"},children:e.type})]})}),(0,a.jsx)("td",{children:(0,a.jsx)("span",{className:"status ".concat("completed"===e.status?"status-active":"overdue"===e.status?"status-inactive":"in_progress"===e.status?"status-maintenance":"status-available"),children:e.status.replace("_"," ")})}),(0,a.jsx)("td",{children:e.description}),(0,a.jsx)("td",{children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{children:e.scheduledDate}),e.completedDate&&(0,a.jsxs)("div",{className:"text-gray-600",style:{fontSize:"0.875rem"},children:["Completed: ",e.completedDate]})]})}),(0,a.jsx)("td",{children:e.technician}),(0,a.jsxs)("td",{children:["$",e.cost]}),(0,a.jsx)("td",{children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{style:{fontSize:"0.875rem"},children:["Est: ",e.estimatedDuration]}),e.actualDuration&&(0,a.jsxs)("div",{className:"text-gray-600",style:{fontSize:"0.875rem"},children:["Act: ",e.actualDuration]})]})}),(0,a.jsx)("td",{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{style:{width:"8px",height:"8px",backgroundColor:h(e.priority),borderRadius:"50%"}}),(0,a.jsx)("span",{style:{textTransform:"capitalize"},children:e.priority})]})}),(0,a.jsx)("td",{children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{className:"btn btn-secondary",style:{fontSize:"0.875rem",padding:"0.25rem 0.5rem"},children:"View"}),(0,a.jsx)("button",{className:"btn btn-secondary",style:{fontSize:"0.875rem",padding:"0.25rem 0.5rem"},children:"Edit"})]})})]},e.id))})]})})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"card-header",children:(0,a.jsx)("h3",{children:"Maintenance Notes & Documentation"})}),(0,a.jsx)("div",{className:"card-content",children:(0,a.jsx)(r.A,{section:"maintenance",entityId:"maintenance-general",entityName:"Maintenance Operations"})})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[441,684,358],()=>s(63267)),_N_E=e.O()}]);