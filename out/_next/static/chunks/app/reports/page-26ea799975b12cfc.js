(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[22],{11550:(e,t,s)=>{"use strict";s.d(t,{A:()=>a,AuthProvider:()=>n,O:()=>c});var i=s(95155),r=s(12115);let l=(0,r.createContext)(void 0),a=()=>{let e=(0,r.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},n=e=>{let{children:t}=e,[s,a]=(0,r.useState)({id:"U001",name:"Fleet Manager",email:"manager@fleetflow.com",role:"Admin",permissions:["all"]});return(0,i.jsx)(l.Provider,{value:{user:s,hasPermission:e=>!!s&&(!!s.permissions.includes("all")||s.permissions.includes(e)),login:e=>{a(e),localStorage.setItem("fleetflow-user",JSON.stringify(e))},logout:()=>{a(null),localStorage.removeItem("fleetflow-user")}},children:t})},c=e=>{let{children:t,requiredPermission:s,fallback:r}=e,{hasPermission:l}=a();return s&&!l(s)?r||(0,i.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[(0,i.jsx)("svg",{className:"w-12 h-12 text-red-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 15.5c-.77.833.192 2.5 1.732 2.5z"})}),(0,i.jsx)("h3",{className:"text-lg font-medium text-red-800 mb-2",children:"Access Denied"}),(0,i.jsx)("p",{className:"text-red-600",children:"You don't have permission to access this feature."}),(0,i.jsxs)("p",{className:"text-sm text-red-500 mt-2",children:["Required permission: ",(0,i.jsx)("code",{className:"bg-red-100 px-2 py-1 rounded",children:s})]})]}):(0,i.jsx)(i.Fragment,{children:t})}},15570:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var i=s(95155),r=s(12115),l=s(11550);function a(e){let{section:t,entityId:s,entityName:a}=e,{user:n}=(0,l.A)(),[c,d]=(0,r.useState)([]),[o,h]=(0,r.useState)(""),[m,x]=(0,r.useState)(!1),[u,g]=(0,r.useState)("medium"),[f,j]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let e=localStorage.getItem("fleetflow-notes-".concat(t,"-").concat(s));e&&d(JSON.parse(e))},[t,s]);let p=e=>{d(e),localStorage.setItem("fleetflow-notes-".concat(t,"-").concat(s),JSON.stringify(e))},v=e=>{p(c.filter(t=>t.id!==e))},y=e=>{switch(e){case"high":return"bg-red-100 border-red-300 text-red-800";case"medium":return"bg-yellow-100 border-yellow-300 text-yellow-800";case"low":return"bg-green-100 border-green-300 text-green-800";default:return"bg-gray-100 border-gray-300 text-gray-800"}},b=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return(0,i.jsxs)("div",{className:"sticky-note-container",children:[(0,i.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,i.jsxs)("button",{onClick:()=>x(!m),className:"flex items-center gap-2 text-sm font-medium text-gray-700 hover:text-gray-900",children:[(0,i.jsx)("span",{className:"text-yellow-500",children:"\uD83D\uDCDD"}),"Notes ",a&&"- ".concat(a),c.length>0&&(0,i.jsx)("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",children:c.length}),(0,i.jsx)("svg",{className:"w-4 h-4 transition-transform ".concat(m?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),m&&(0,i.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 space-y-3",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("textarea",{value:o,onChange:e=>h(e.target.value),placeholder:"Add a note about this item...",className:"w-full p-2 border border-gray-300 rounded text-sm resize-none",rows:2}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsxs)("select",{value:u,onChange:e=>g(e.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1",children:[(0,i.jsx)("option",{value:"low",children:"Low Priority"}),(0,i.jsx)("option",{value:"medium",children:"Medium Priority"}),(0,i.jsx)("option",{value:"high",children:"High Priority"})]}),(0,i.jsxs)("label",{className:"flex items-center gap-1 text-xs text-gray-600",children:[(0,i.jsx)("input",{type:"checkbox",checked:f,onChange:e=>j(e.target.checked),className:"text-xs"}),"Share with team"]})]}),(0,i.jsx)("button",{onClick:()=>{o.trim()&&n&&(p([{id:Date.now().toString(),content:o.trim(),section:t,entityId:s,createdBy:n.name,createdAt:new Date().toISOString(),isShared:f,priority:u},...c]),h(""))},disabled:!o.trim(),className:"bg-blue-500 text-white px-3 py-1 rounded text-xs hover:bg-blue-600 disabled:bg-gray-300",children:"Add Note"})]})]}),(0,i.jsx)("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:0===c.length?(0,i.jsx)("p",{className:"text-gray-500 text-sm italic",children:"No notes yet. Add one above!"}):c.map(e=>(0,i.jsx)("div",{className:"p-3 rounded border-l-4 ".concat(y(e.priority)),children:(0,i.jsxs)("div",{className:"flex justify-between items-start",children:[(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("p",{className:"text-sm text-gray-800 mb-1",children:e.content}),(0,i.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[(0,i.jsx)("span",{children:e.createdBy}),(0,i.jsx)("span",{children:"•"}),(0,i.jsx)("span",{children:b(e.createdAt)}),(0,i.jsx)("span",{children:"•"}),(0,i.jsx)("span",{className:"capitalize",children:e.priority}),e.isShared&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{children:"•"}),(0,i.jsx)("span",{className:"text-blue-600",children:"\uD83D\uDC65 Shared"})]})]})]}),(0,i.jsx)("button",{onClick:()=>v(e.id),className:"text-red-500 hover:text-red-700 ml-2",title:"Delete note",children:(0,i.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},e.id))})]})]})}},38905:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var i=s(95155),r=s(12115),l=s(15570);function a(){let[e,t]=(0,r.useState)("overview"),[s,a]=(0,r.useState)("last_30_days"),n=(0,r.useRef)(null),c=(0,r.useRef)(null);return(0,r.useEffect)(()=>{let e=n.current;if(!e)return;let t=e.getContext("2d");if(!t)return;t.clearRect(0,0,e.width,e.height);let s=[65,75,80,85,82,88,92,89,95,90,87,91],i=e.width-80,r=e.height-80,l=Math.max(...s),a=Math.min(...s),c=l-a;t.strokeStyle="#e5e7eb",t.lineWidth=1;for(let s=0;s<=5;s++){let i=40+s*r/5;t.beginPath(),t.moveTo(40,i),t.lineTo(e.width-40,i),t.stroke()}t.strokeStyle="#667eea",t.lineWidth=3,t.beginPath(),s.forEach((e,l)=>{let n=40+l*i/(s.length-1),d=40+r-(e-a)/c*r;0===l?t.moveTo(n,d):t.lineTo(n,d)}),t.stroke(),t.fillStyle="#667eea",s.forEach((e,l)=>{let n=40+l*i/(s.length-1);t.beginPath(),t.arc(n,40+r-(e-a)/c*r,4,0,2*Math.PI),t.fill()})},[e]),(0,r.useEffect)(()=>{let e=c.current;if(!e)return;let t=e.getContext("2d");if(!t)return;t.clearRect(0,0,e.width,e.height);let s=["Truck-045","Van-012","Truck-089","Van-023","Truck-156"],i=[8.2,7.5,9.1,6.8,8.7],r=e.width-80,l=e.height-80,a=r/s.length-20,n=Math.max(...i);s.forEach((e,c)=>{let d=i[c]/n*l,o=40+c*(r/s.length)+10,h=40+l-d;t.fillStyle=c%2==0?"#667eea":"#764ba2",t.fillRect(o,h,a,d),t.fillStyle="#374151",t.font="12px Arial",t.textAlign="center",t.fillText(i[c].toString(),o+a/2,h-5)})},[e]),(0,i.jsxs)("div",{className:"container py-6",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-gray-900 mb-2",style:{fontSize:"2rem",fontWeight:"bold"},children:"Reports & Analytics"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Comprehensive insights into your fleet performance"})]}),(0,i.jsxs)("div",{className:"flex gap-3",children:[(0,i.jsx)("button",{className:"btn btn-secondary",children:"Export PDF"}),(0,i.jsx)("button",{className:"btn btn-primary",children:"Schedule Report"})]})]}),(0,i.jsxs)("div",{className:"card mb-6",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,i.jsx)("h3",{style:{fontSize:"1.25rem",fontWeight:"600"},children:"Report Type"}),(0,i.jsx)("div",{className:"form-group",style:{margin:0,minWidth:"200px"},children:(0,i.jsxs)("select",{className:"form-input",value:s,onChange:e=>a(e.target.value),children:[(0,i.jsx)("option",{value:"last_7_days",children:"Last 7 Days"}),(0,i.jsx)("option",{value:"last_30_days",children:"Last 30 Days"}),(0,i.jsx)("option",{value:"last_90_days",children:"Last 90 Days"}),(0,i.jsx)("option",{value:"last_year",children:"Last Year"}),(0,i.jsx)("option",{value:"custom",children:"Custom Range"})]})})]}),(0,i.jsx)("div",{className:"grid grid-cols-3 gap-4",children:[{id:"overview",label:"Fleet Overview",icon:"\uD83D\uDCCA"},{id:"performance",label:"Performance",icon:"\uD83D\uDCC8"},{id:"maintenance",label:"Maintenance",icon:"\uD83D\uDD27"},{id:"fuel",label:"Fuel Usage",icon:"⛽"},{id:"drivers",label:"Driver Reports",icon:"\uD83D\uDC65"},{id:"routes",label:"Route Analysis",icon:"\uD83D\uDDFA️"}].map(s=>(0,i.jsx)("button",{className:"p-4 text-left border-2 rounded-lg transition-all ".concat(e===s.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),onClick:()=>t(s.id),children:(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("span",{style:{fontSize:"1.5rem"},children:s.icon}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{fontWeight:"600"},children:s.label}),(0,i.jsx)("div",{className:"text-gray-600",style:{fontSize:"0.875rem"},children:"Detailed analytics and insights"})]})]})},s.id))})]}),(0,i.jsx)("div",{className:"grid grid-cols-3 gap-6 mb-6",children:[{label:"Fleet Utilization",value:"87%",change:"+3.2%",trend:"up"},{label:"Average Fuel Efficiency",value:"8.2 L/100km",change:"-2.1%",trend:"up"},{label:"On-Time Delivery",value:"94%",change:"+1.8%",trend:"up"},{label:"Maintenance Costs",value:"$23,450",change:"-8.5%",trend:"up"},{label:"Driver Performance",value:"4.7/5",change:"+0.2",trend:"up"},{label:"Vehicle Downtime",value:"3.2%",change:"-1.1%",trend:"up"}].map((e,t)=>(0,i.jsxs)("div",{className:"metric-card",children:[(0,i.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,i.jsx)("div",{className:"metric-label",children:e.label}),(0,i.jsx)("span",{className:"metric-change ".concat("up"===e.trend?"metric-up":"metric-down"),children:e.change})]}),(0,i.jsx)("div",{className:"metric-value",style:{fontSize:"1.75rem"},children:e.value})]},t))}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[(0,i.jsxs)("div",{className:"card",children:[(0,i.jsx)("h3",{className:"mb-4",style:{fontSize:"1.25rem",fontWeight:"600"},children:"Fleet Performance Trend"}),(0,i.jsx)("canvas",{ref:n,width:400,height:250,style:{width:"100%",maxHeight:"250px"}}),(0,i.jsx)("div",{className:"mt-4 flex justify-center gap-6",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("div",{style:{width:"12px",height:"12px",backgroundColor:"#667eea",borderRadius:"50%"}}),(0,i.jsx)("span",{className:"text-gray-600",style:{fontSize:"0.875rem"},children:"Performance Score"})]})})]}),(0,i.jsxs)("div",{className:"card",children:[(0,i.jsx)("h3",{className:"mb-4",style:{fontSize:"1.25rem",fontWeight:"600"},children:"Fuel Efficiency by Vehicle"}),(0,i.jsx)("canvas",{ref:c,width:400,height:250,style:{width:"100%",maxHeight:"250px"}}),(0,i.jsx)("div",{className:"mt-4 text-center",children:(0,i.jsx)("span",{className:"text-gray-600",style:{fontSize:"0.875rem"},children:"Fuel consumption (L/100km) - Lower is better"})})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[(0,i.jsxs)("div",{className:"card",children:[(0,i.jsx)("h3",{className:"mb-4",style:{fontSize:"1.25rem",fontWeight:"600"},children:"Top Performing Vehicles"}),(0,i.jsx)("div",{className:"space-y-3",children:[{vehicle:"Van-023",score:95,efficiency:6.8,uptime:"99.2%"},{vehicle:"Truck-045",score:92,efficiency:8.2,uptime:"97.8%"},{vehicle:"Van-012",score:89,efficiency:7.5,uptime:"95.5%"},{vehicle:"Truck-156",score:87,efficiency:8.7,uptime:"94.1%"}].map((e,t)=>(0,i.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50",style:{borderRadius:"6px"},children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("div",{className:"flex items-center justify-center",style:{width:"32px",height:"32px",backgroundColor:0===t?"#10b981":1===t?"#3b82f6":"#6b7280",borderRadius:"50%",color:"white",fontWeight:"bold"},children:t+1}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{fontWeight:"600"},children:e.vehicle}),(0,i.jsxs)("div",{className:"text-gray-600",style:{fontSize:"0.875rem"},children:["Score: ",e.score,"/100"]})]})]}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsxs)("div",{style:{fontSize:"0.875rem",fontWeight:"600"},children:[e.efficiency," L/100km"]}),(0,i.jsxs)("div",{className:"text-gray-600",style:{fontSize:"0.875rem"},children:[e.uptime," uptime"]})]})]},t))})]}),(0,i.jsxs)("div",{className:"card",children:[(0,i.jsx)("h3",{className:"mb-4",style:{fontSize:"1.25rem",fontWeight:"600"},children:"Monthly Breakdown"}),(0,i.jsx)("div",{className:"space-y-4",children:[{category:"Total Distance",value:"45,892 km",budget:"50,000 km",percentage:92},{category:"Fuel Costs",value:"$12,450",budget:"$15,000",percentage:83},{category:"Maintenance",value:"$8,230",budget:"$10,000",percentage:82},{category:"Driver Hours",value:"2,340 hrs",budget:"2,500 hrs",percentage:94}].map((e,t)=>(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsx)("span",{className:"text-gray-600",children:e.category}),(0,i.jsx)("span",{style:{fontWeight:"600"},children:e.value})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("div",{style:{width:"100%",height:"8px",backgroundColor:"#e5e7eb",borderRadius:"4px",overflow:"hidden"},children:(0,i.jsx)("div",{style:{width:"".concat(e.percentage,"%"),height:"100%",backgroundColor:e.percentage>90?"#10b981":e.percentage>75?"#f59e0b":"#ef4444",borderRadius:"4px"}})}),(0,i.jsxs)("span",{style:{fontSize:"0.875rem",color:"#6b7280",minWidth:"40px"},children:[e.percentage,"%"]})]}),(0,i.jsxs)("div",{className:"text-gray-500",style:{fontSize:"0.75rem"},children:["Budget: ",e.budget]})]},t))})]})]}),(0,i.jsxs)("div",{className:"card",children:[(0,i.jsx)("h3",{className:"mb-4",style:{fontSize:"1.25rem",fontWeight:"600"},children:"Fleet Summary Report"}),(0,i.jsx)("div",{style:{overflowX:"auto"},children:(0,i.jsxs)("table",{className:"table",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Vehicle"}),(0,i.jsx)("th",{children:"Total Distance"}),(0,i.jsx)("th",{children:"Fuel Used"}),(0,i.jsx)("th",{children:"Efficiency"}),(0,i.jsx)("th",{children:"Uptime"}),(0,i.jsx)("th",{children:"Maintenance Cost"}),(0,i.jsx)("th",{children:"Performance Score"})]})}),(0,i.jsx)("tbody",{children:[{vehicle:"Truck-045",distance:"12,450 km",fuel:"1,021 L",efficiency:"8.2 L/100km",uptime:"97.8%",maintenance:"$2,340",score:92},{vehicle:"Van-012",distance:"8,920 km",fuel:"669 L",efficiency:"7.5 L/100km",uptime:"95.5%",maintenance:"$1,890",score:89},{vehicle:"Truck-089",distance:"15,670 km",fuel:"1,426 L",efficiency:"9.1 L/100km",uptime:"92.3%",maintenance:"$3,120",score:85},{vehicle:"Van-023",distance:"6,780 km",fuel:"461 L",efficiency:"6.8 L/100km",uptime:"99.2%",maintenance:"$980",score:95},{vehicle:"Truck-156",distance:"11,230 km",fuel:"977 L",efficiency:"8.7 L/100km",uptime:"94.1%",maintenance:"$2,560",score:87}].map((e,t)=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{style:{fontWeight:"600"},children:e.vehicle}),(0,i.jsx)("td",{children:e.distance}),(0,i.jsx)("td",{children:e.fuel}),(0,i.jsx)("td",{children:e.efficiency}),(0,i.jsx)("td",{children:e.uptime}),(0,i.jsx)("td",{children:e.maintenance}),(0,i.jsx)("td",{children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("span",{style:{fontWeight:"600"},children:e.score}),(0,i.jsx)("div",{style:{width:"40px",height:"6px",backgroundColor:"#e5e7eb",borderRadius:"3px",overflow:"hidden"},children:(0,i.jsx)("div",{style:{width:"".concat(e.score,"%"),height:"100%",backgroundColor:e.score>90?"#10b981":e.score>80?"#3b82f6":"#f59e0b",borderRadius:"3px"}})})]})})]},t))})]})})]}),(0,i.jsxs)("div",{className:"card",children:[(0,i.jsx)("div",{className:"card-header",children:(0,i.jsx)("h3",{children:"Report Analysis & Notes"})}),(0,i.jsx)("div",{className:"card-content",children:(0,i.jsx)(l.A,{section:"reports",entityId:"reports-general",entityName:"Fleet Reports"})})]})]})}},73159:(e,t,s)=>{Promise.resolve().then(s.bind(s,38905))}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(73159)),_N_E=e.O()}]);