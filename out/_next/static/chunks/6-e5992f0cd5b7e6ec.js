"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6],{35695:(e,t,a)=>{var l=a(18999);a.o(l,"useRouter")&&a.d(t,{useRouter:function(){return l.useRouter}})},83908:(e,t,a)=>{a.d(t,{A:()=>i});var l=a(95155),s=a(12115),r=a(11550);function i(e){let{onLoadPosted:t}=e,{user:a}=(0,r.A)(),[i,n]=(0,s.useState)(!1),[o,c]=(0,s.useState)(!1),[d,u]=(0,s.useState)({pickupLocation:"",deliveryLocation:"",pickupDate:"",deliveryDate:"",weight:"",commodity:"",rate:"",distance:"",equipment:"dry-van",specialRequirements:"",contactInfo:""}),m=(e,t)=>{u(a=>({...a,[e]:t}))},x=async(e,t)=>e&&t?Math.floor(2e3*Math.random())+100:0,p=async e=>{try{console.log("Sending SMS notifications to drivers and carriers..."),"\uD83D\uDE9B NEW LOAD AVAILABLE\nFrom: ".concat(e.pickupLocation,"\nTo: ").concat(e.deliveryLocation,"\nRate: $").concat(e.rate,"\nEquipment: ").concat(e.equipment,"\nContact: ").concat(e.contactInfo,"\nLoad ID: ").concat(e.id);let t={id:Date.now().toString(),type:"new-load",title:"New Load Available",message:"New ".concat(e.equipment," load from ").concat(e.pickupLocation," to ").concat(e.deliveryLocation),loadId:e.id,timestamp:new Date().toISOString()},a=JSON.parse(localStorage.getItem("fleetflow-notifications")||"[]");return a.unshift(t),localStorage.setItem("fleetflow-notifications",JSON.stringify(a.slice(0,50))),!0}catch(e){return console.error("Failed to send notifications:",e),!1}},b=async()=>{if(!a)return void alert("You must be logged in to post loads");let e=["pickupLocation","deliveryLocation","pickupDate","deliveryDate","rate","commodity"].filter(e=>!d[e]);if(e.length>0)return void alert("Please fill in the following required fields: ".concat(e.join(", ")));c(!0);try{let e=d.distance;e||(e=(await x(d.pickupLocation,d.deliveryLocation)).toString());let l={id:"LOAD-".concat(Date.now()),...d,distance:e,postedBy:a.name,postedAt:new Date().toISOString(),status:"available"},s=JSON.parse(localStorage.getItem("fleetflow-loads")||"[]");s.unshift(l),localStorage.setItem("fleetflow-loads",JSON.stringify(s));let r=await p(l);u({pickupLocation:"",deliveryLocation:"",pickupDate:"",deliveryDate:"",weight:"",commodity:"",rate:"",distance:"",equipment:"dry-van",specialRequirements:"",contactInfo:""}),null==t||t(l),alert("Load posted successfully! ".concat(r?"Notifications sent to drivers and carriers.":"Note: Notification system is in demo mode.")),n(!1)}catch(e){console.error("Error posting load:",e),alert("Failed to post load. Please try again.")}finally{c(!1)}};return(0,l.jsxs)("div",{className:"load-upload bg-white border border-gray-200 rounded-lg p-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCCB"}),(0,l.jsx)("h3",{className:"font-semibold text-gray-900",children:"Post New Load"})]}),(0,l.jsxs)("button",{onClick:()=>n(!i),className:"bg-blue-500 text-white px-4 py-2 rounded text-sm hover:bg-blue-600 flex items-center gap-2",children:[(0,l.jsx)("span",{children:"+"}),i?"Cancel":"Add Load"]})]}),i&&(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Pickup Location ",(0,l.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,l.jsx)("input",{type:"text",value:d.pickupLocation,onChange:e=>m("pickupLocation",e.target.value),placeholder:"City, State or ZIP",className:"w-full border border-gray-300 rounded px-3 py-2 text-sm"})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Delivery Location ",(0,l.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,l.jsx)("input",{type:"text",value:d.deliveryLocation,onChange:e=>m("deliveryLocation",e.target.value),placeholder:"City, State or ZIP",className:"w-full border border-gray-300 rounded px-3 py-2 text-sm"})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Pickup Date ",(0,l.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,l.jsx)("input",{type:"date",value:d.pickupDate,onChange:e=>m("pickupDate",e.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 text-sm"})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Delivery Date ",(0,l.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,l.jsx)("input",{type:"date",value:d.deliveryDate,onChange:e=>m("deliveryDate",e.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 text-sm"})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Rate (USD) ",(0,l.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,l.jsx)("input",{type:"number",value:d.rate,onChange:e=>m("rate",e.target.value),placeholder:"2500",className:"w-full border border-gray-300 rounded px-3 py-2 text-sm"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Weight (lbs)"}),(0,l.jsx)("input",{type:"number",value:d.weight,onChange:e=>m("weight",e.target.value),placeholder:"40000",className:"w-full border border-gray-300 rounded px-3 py-2 text-sm"})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Equipment Type ",(0,l.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,l.jsx)("select",{value:d.equipment,onChange:e=>m("equipment",e.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 text-sm",children:[{value:"dry-van",label:"\uD83D\uDE9B Dry Van"},{value:"reefer",label:"\uD83E\uDDCA Refrigerated"},{value:"flatbed",label:"\uD83D\uDCE6 Flatbed"},{value:"step-deck",label:"\uD83D\uDCD0 Step Deck"},{value:"lowboy",label:"\uD83D\uDE9C Lowboy"},{value:"tanker",label:"\uD83D\uDEE2️ Tanker"},{value:"auto-carrier",label:"\uD83D\uDE97 Auto Carrier"},{value:"box-truck",label:"\uD83D\uDCE6 Box Truck"}].map(e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Distance (miles)"}),(0,l.jsx)("input",{type:"number",value:d.distance,onChange:e=>m("distance",e.target.value),placeholder:"Auto-calculated",className:"w-full border border-gray-300 rounded px-3 py-2 text-sm"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Commodity ",(0,l.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,l.jsx)("input",{type:"text",value:d.commodity,onChange:e=>m("commodity",e.target.value),placeholder:"General freight, Electronics, Food products, etc.",className:"w-full border border-gray-300 rounded px-3 py-2 text-sm"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Information"}),(0,l.jsx)("input",{type:"text",value:d.contactInfo,onChange:e=>m("contactInfo",e.target.value),placeholder:"Phone number or email for carrier contact",className:"w-full border border-gray-300 rounded px-3 py-2 text-sm"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Special Requirements"}),(0,l.jsx)("textarea",{value:d.specialRequirements,onChange:e=>m("specialRequirements",e.target.value),placeholder:"HAZMAT, temp control, special handling, etc.",className:"w-full border border-gray-300 rounded px-3 py-2 text-sm",rows:2})]}),(0,l.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded p-3",children:[(0,l.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"\uD83D\uDCF1 Notification System"}),(0,l.jsx)("p",{className:"text-sm text-blue-700",children:"When you post this load, notifications will be sent to:"}),(0,l.jsxs)("ul",{className:"text-sm text-blue-700 mt-1 list-disc list-inside",children:[(0,l.jsx)("li",{children:"SMS messages to registered drivers and carriers"}),(0,l.jsx)("li",{children:"In-app notifications to active users"}),(0,l.jsx)("li",{children:"Email alerts to subscribed partners"})]})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("button",{onClick:b,disabled:o,className:"bg-green-500 text-white px-6 py-2 rounded text-sm hover:bg-green-600 disabled:bg-gray-400 flex items-center gap-2",children:o?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"animate-spin",children:"⏳"}),"Posting..."]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{children:"\uD83D\uDCE4"}),"Post Load & Notify"]})}),(0,l.jsx)("button",{onClick:()=>n(!1),className:"bg-gray-500 text-white px-4 py-2 rounded text-sm hover:bg-gray-600",children:"Cancel"})]})]})]})}}}]);